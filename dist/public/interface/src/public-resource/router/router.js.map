{"version":3,"sources":["../../../../../../public/interface/src/public-resource/router/router.js"],"names":["pathFilterRegExp","RegExp","TiramisuRouter","mode","routes","activate","transition","pre_params","$route","query","next","beforeEach","to","from","user","get","test","path"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;AACA;AACA;AACA,IAAIA,mBAAmB,IAAIC,MAAJ,CAAW,uCAAX,EAAoD,GAApD,CAAvB;;AAEA,IAAMC,iBAAiB,wBAAc;AACjCC,UAAM,SAD2B;AAEjCC,gCAFiC;AAGjCC,YAHiC,oBAGvBC,UAHuB,EAGX;AAClB,aAAKC,UAAL,GAAkB,KAAKC,MAAL,CAAYC,KAA9B;AACAH,mBAAWI,IAAX;AACH;AANgC,CAAd,CAAvB;AAQA;AACAR,eAAeS,UAAf,CAA0B,UAACC,EAAD,EAAKC,IAAL,EAAWH,IAAX,EAAoB;AAC1C,QAAII,OAAO,gBAAMC,GAAN,CAAU,WAAV,CAAX;AACA,QAAIf,iBAAiBgB,IAAjB,CAAsBJ,GAAGK,IAAzB,KAAkCH,SAAS,IAA/C,EAAqD;AACjDJ;AACH,KAFD,MAEO;AACHA,aAAK,mBAAL;AACH;AACJ,CAPD;kBAQeR,c","file":"router.js","sourcesContent":["import VueRouter from 'vue-router'\r\nimport Cache from '../modules/cache'\r\nimport routers from './sub_router'\r\n// let routers = require('./sub_router')\r\n//  过滤规则 - 用户登录/注册/登出\r\nlet pathFilterRegExp = new RegExp('(/admin/user)/(login|register|logout)', 'i')\r\n\r\nconst TiramisuRouter = new VueRouter({\r\n    mode: 'history',\r\n    routes: routers,\r\n    activate (transition) {\r\n        this.pre_params = this.$route.query\r\n        transition.next()\r\n    },\r\n})\r\n//  路由守卫 - 登录检测\r\nTiramisuRouter.beforeEach((to, from, next) => {\r\n    let user = Cache.get('user_info')\r\n    if (pathFilterRegExp.test(to.path) || user !== null) {\r\n        next()\r\n    } else {\r\n        next('/admin/user/login')\r\n    }\r\n})\r\nexport default TiramisuRouter"]}